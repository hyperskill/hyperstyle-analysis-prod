project: jba

plugins:
  enabled:
    - python

# Prerequisites: https://github.com/pyenv/pyenv/wiki#suggested-build-environment
environment:
  path: .venv
  python: 3.9

requirements:
  main:
    - name: pandas
      version: ==2.0.3
    - name: numpy
      version: ==1.25.0
    - name: matplotlib
      version: ==3.7.2
    - name: python-dotenv
      version: ==1.0.0
    - name: requests
      version: ==2.31.0
    - name: argparse
      version: ==1.4.0
    - name: pandarallel
      version: ==1.6.5
  dev:
    - name: pytest
      version: ==7.4.0
    - name: pytest-runner
      version: ==6.0.0
    - name: pytest-subtests
      version: ==0.11.0

tasks:
  run:
    - id: prepare_course_data
      entrypoint: jba/processing/prepare_course_data.py
    - id: process_course_data
      entrypoint: jba/processing/data_processing.py

    # Plots
    - id: plot_task_attempt
      entrypoint: jba/plots/task_attempt.py
    - id: plot_task_solving
      entrypoint: jba/plots/task_solving.py

    # Data gathering
    - id: submissions_gathering
      entrypoint: jba/gathering/gather_submissions_info.py

    # Test logs
    - id: tests_runner
      entrypoint: jba/test_logs/tests_runner.py
    - id: logs_parser
      entrypoint: jba/test_logs/logs_parser.py

  test:
    pytest:
      - id: data_processing_tests
        targets:
          - jba_tests/processing/data_processing
      - id: test_logs_tests
        targets:
          - jba_tests/test_logs/

subprojects:
  - core

